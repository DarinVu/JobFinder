<app-header></app-header>
<div class="row justify-content-md-center">
  <div class="col-xs-12 col-md-6">
    <form [formGroup]="jobForm" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
              <div class="row">
                <div class="col-xs-auto col-md-auto">
                  <label for="position">Position Title </label>
                </div>
                <div class=" col-md-auto">
                  <p class="warning-message" *ngIf="!jobForm.controls['position'].valid && jobForm.controls['position'].touched">This field must be filled.</p>
                </div>
              </div>
            <input 
              type="text" 
              class="form-control" 
              id="position"
              formControlName="position"
              #position>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="row">
              <div class="col-xs-auto col-md-auto">
                <label for="company">Company Name</label>

              </div>
              <div class="col-xs-auto col-md-auto">
                <p class="warning-message" *ngIf="!jobForm.controls['company'].valid && jobForm.controls['company'].touched">This field must be filled.</p>
              </div>
            </div>
            <input 
              type="text" 
              class="form-control" 
              id="company"
              formControlName="company">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="row">
              <div class="col-xs-auto col-md-auto">
                <label for="location">Location</label>
              </div>
              <div class="col-xs-auto col-md-auto">
                <p class="warning-message" *ngIf="!jobForm.controls['location'].valid && jobForm.controls['location'].touched">This field must be filled.</p>
              </div>
            </div>
            <input 
              type="text" 
              class="form-control" 
              id="location"
              formControlName="location">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="row">
              <div class="col-xs-auto col-md-auto">
                <label for="description">Description</label>
              </div>
              <div class="col-xs-auto col-md-auto">
                <p class="warning-message" *ngIf="!jobForm.controls['description'].valid && jobForm.controls['description'].touched">This field must be filled.</p>
              </div>
            </div>
            <textarea 
              class="form-control" 
              id="description"
              rows="3"
              formControlName="description"></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group" formArrayName='requirements'>
            <label for="requirements">Requirements</label>
              <div 
              class="requirement-container" 
              *ngFor="let rqControl of controls; let i = index"
              [formGroupName]="i"
              >
                  <input 
                  type="text" 
                  class="form-control" 
                  id="requirement"
                  formControlName="requirement"
                  #requirement
                  >
                  <button type="button" class="btn btn-danger" (click)="onDeleteRequirement(i)">X</button>
              </div>
            <div>
              <button type="button" (click)="onAddRequirement()" class="btn" style="background-color: #6a994e; color: white;">Add</button>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="row">
              <div class="col-xs-auto col-md-auto">
                <label for="contact">Contact</label>
              </div>
              <div class="col-xs-auto col-md-auto">
                <p class="warning-message" *ngIf="!jobForm.controls['contact'].valid && jobForm.controls['contact'].touched && (jobForm.controls['contact'].value === null)">This field must be filled.</p>
                <p class="warning-message" *ngIf="!jobForm.controls['contact'].valid && jobForm.controls['contact'].touched && jobForm.controls['contact'].errors.email">Please enter a valid email.</p>
              </div>
            </div>
            <input 
              type="text" 
              class="form-control" 
              id="contact"
              formControlName="contact" >
          </div>
        </div>
      </div>
      <hr>
      <div>
        <button class="btn submit" (click)="openModal()" type="submit" [disabled]="!jobForm.valid">Post</button>
      </div>
    </form>
    <div class="modal" tabindex="-1" [ngStyle]="{'display': display}">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Success!</h5>
          </div>
          <div class="modal-body">
            <p>Your job oppurtunity was successfully posted!</p>
          </div>
          <div class="modal-footer">
            <button type="button" (click)=onContinue() class="btn btn-success" >Continue</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
